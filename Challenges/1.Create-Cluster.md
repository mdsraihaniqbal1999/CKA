# Kubernetes Cluster Setup Guide

This guide provides step-by-step instructions to create a Kubernetes cluster with **1 control plane node and 2 worker nodes** using **Minikube, Kubeadm, and Kind**.

## 1. Using Minikube
Minikube is a tool that allows you to run a single-node Kubernetes cluster locally. However, it can be extended to simulate multi-node clusters.

### Prerequisites:
- Install [Minikube](https://minikube.sigs.k8s.io/docs/start/)
- Install [Kubectl](https://kubernetes.io/docs/tasks/tools/)

### Steps:
1. Start Minikube with multiple nodes:
   ```sh
   minikube start --nodes 3 --driver=docker
   ```
   This command creates 1 control plane and 2 worker nodes.

2. Verify the nodes:
   ```sh
   kubectl get nodes
   ```
   You should see three nodes in a `Ready` state.

---

## 2. Using Kubeadm
Kubeadm is used to bootstrap a Kubernetes cluster manually.

### Prerequisites:
- Install **Docker** or **containerd**
- Install **Kubeadm, Kubelet, and Kubectl**
- Disable swap: `sudo swapoff -a`

### Steps:
#### 2.1. Initialize Control Plane Node
1. On the master node, initialize Kubernetes:
   ```sh
   sudo kubeadm init --pod-network-cidr=192.168.0.0/16
   ```
2. Set up kubectl access:
   ```sh
   mkdir -p $HOME/.kube
   sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
   sudo chown $(id -u):$(id -g) $HOME/.kube/config
   ```
3. Install a network plugin (e.g., Calico):
   ```sh
   kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml
   ```
4. Get the `kubeadm join` command from the output (copy it for later use).

#### 2.2. Join Worker Nodes
5. Run the `kubeadm join` command on each worker node (use the token from step 4):
   ```sh
   sudo kubeadm join <master-ip>:6443 --token <token> --discovery-token-ca-cert-hash sha256:<hash>
   ```
6. Verify nodes:
   ```sh
   kubectl get nodes
   ```
   You should see 1 control plane and 2 worker nodes in a `Ready` state.

---

## 3. Using Kind
Kind is a tool to run Kubernetes clusters using Docker containers.

### Prerequisites:
- Install [Kind](https://kind.sigs.k8s.io/docs/user/quick-start/)
- Install [Kubectl](https://kubernetes.io/docs/tasks/tools/)

### Steps:
1. Create a Kind configuration file (`kind-config.yaml`):
   ```yaml
   kind: Cluster
   apiVersion: kind.x-k8s.io/v1alpha4
   nodes:
   - role: control-plane
   - role: worker
   - role: worker
   ```
2. Create the cluster:
   ```sh
   kind create cluster --config kind-config.yaml
   ```
3. Verify the cluster:
   ```sh
   kubectl get nodes
   ```
   You should see 1 control plane and 2 worker nodes.

---

## Summary
| Method    | Control Plane | Worker Nodes | Notes |
|-----------|--------------|--------------|-------|
| Minikube  | 1            | 2            | Easiest for local testing |
| Kubeadm   | 1            | 2            | Suitable for real-world setups |
| Kind      | 1            | 2            | Best for CI/CD and testing |

Choose the method that best suits your needs! ðŸš€

